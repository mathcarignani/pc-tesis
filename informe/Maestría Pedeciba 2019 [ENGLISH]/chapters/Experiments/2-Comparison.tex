
\section{Comparison of Masking and Non-Masking Variants}
\label{secX:rendimiento-relativo}


In this section, we compare the compression performance of the masking and non-masking variants of each of the evaluated coding algorithms that admit both. Specifically, we compare:


\vspace{-5pt}
\begin{itemize}
    \item \textit{CoderPCA-M} and \textit{CoderPCA-NM}
    \item \textit{CoderAPCA-M} and \textit{CoderAPCA-NM}
    \item \textit{CoderCA-M} and \textit{CoderCA-NM}
    \item \textit{CoderPWLH-M} and \textit{CoderPWLH-NM}
    \item \textit{CoderPWLHInt-M} and \textit{CoderPWLHInt-NM} 
    \item \textit{CoderGampsLimit-M} and \textit{CoderGampsLimit-NM}.
\end{itemize}


\vspace{+3pt}
\begin{defcion}
We define $A$ as the set of coding algorithms listed above. 
\end{defcion}


\begin{notation}
We denote by $a_\maskalgo$ and $a_\NOmaskalgo$ the masking and non-masking variants of a coding algorithm.
\end{notation}


For each algorithm and each threshold parameter, we compare the performance of the masking and non-masking variants of the algorithm. For the purpose of this comparison, we choose the most favorable window size for each variant, in the sense of the following definition.


\newcommand{\ows}{\textit{OWS}}
\begin{defcion}
The \textit{optimal window size (\ows)} of a coding algorithm $a \in A$ and a threshold parameter $e \in E$, for the data type $z$ of a certain dataset $d$ is given by
\begin{equation}
\label{eq:ows}
\ows(a, e, z, d) = \argmin_{w\ \in \ W} \biggl\{ \tasacompresion(c_{<a, w, e>}, z, d) \biggr\},
\end{equation}
where we break ties in favor of the smallest window size.
\end{defcion}


For each data type $z$ of each dataset $d$, and each coding algorithm $a \in A$ and threshold parameter $e \in E$, we calculate the relative difference between $c_{<a_\maskalgo, w_\maskalgo^{*}, e>}$ and $c_{<a_\NOmaskalgo, w_\NOmaskalgo^{*}, e>}$, as defined in~(\ref{eq:relative-difference-dataset}), where $w_\maskalgo^{*}=OWS(a_\maskalgo, e, z, d)$ and $w_\NOmaskalgo^{*}=OWS(a_\NOmaskalgo, e, z, d)$.


\vspace{+2pt}
As an example, in Figures~\ref{fig:diff-sst} and~\ref{fig:diff-tornado} we display the compression ratio and relative difference, as a function of the error threshold, obtained for two data types of different datasets. Figure~\ref{fig:diff-sst} shows the results for the data type ``VWC" of the dataset \datasetsst, while Figure~\ref{fig:diff-tornado} shows the results for the data type ``Longitude" of the dataset \datasettornado.


In Figure~\ref{fig:diff-sst} we observe a large relative difference favoring the masking variant for all tested algorithms. On the other hand, in Figure~\ref{fig:diff-tornado} we observe that the non-masking variant outperforms the masking variant for all algorithms. We notice, however, that the relative difference is very low in all cases.


Table~\ref{tabla:rendimiento-relativ-NM-M} summarizes the results obtained for each dataset when comparing the relative performance of every algorithm $a_\maskalgo, a_\NOmaskalgo \in A$. The second column outlines the amount of gaps in each dataset. The third column displays the percentage of tested CAIs in which $a_\maskalgo$ performs better than $a_\NOmaskalgo$. The last column shows the range for the values taken by the relative difference for those tested CAIs.


\clearpage

\input{appendices/commands.tex}
\threetwosingle{2-NOAA-SST-1}{\datasetsst}{VWC}{\threetwomost}{\label{fig:diff-sst}}
\threetwosingle{7-NOAA-SPC-tornado-2}{\datasettornado}{Longitude}{\threetwoleast}{\label{fig:diff-tornado}}

\clearpage


\vspace{+0pt}
\input{chapters/Experiments/other/table-relative.tex}
\vspace{-5pt}


For every coding algorithm, on datasets with many gaps the masking variant always produces the best result, while on gapless datasets the non-masking variant always achieves the best result. On the dataset Solar, which presents few gaps, on approximately one half of the combinations of the tested CAIs the best results are obtained with each variant.


Observing the last column of Table~\ref{tabla:rendimiento-relativ-NM-M}, we notice that in every case in which the non-masking variant performs best, the relative difference is close to zero. The minimum value it takes is -0.29\%, which is obtained for the data type ``Longitude" of the dataset \datasettornado, with the APCA algorithm and error parameter $e=30$. In Figure~\ref{fig:diff-tornado} we made a blue circle around the marker associated to that minimum value.


On the other hand, observing the last column of Table~\ref{tabla:rendimiento-relativ-NM-M} we also notice that in every case in which the masking variant performs best, the relative difference reaches higher absolute values. The maximum value (50.60\%) is obtained for the data type ``VWC" of the dataset \datasetsst, with the PCA algorithm and error parameter $e=30$. In Figure~\ref{fig:diff-sst} we made a red circle around the marker associated to that maximum value.


The experimental results presented in this section suggest that if we were interested in compressing a dataset with many gaps, we would benefit by using a masking coding algorithm $a_\maskalgo$. However, even if the dataset didn't have any gaps, the performance gain obtained by using a non-masking algorithm $a_\NOmaskalgo$ instead would be negligible. Since the $a_\maskalgo$ algorithm is more robust and performs better in general, in the following sections we will focus on its study.
